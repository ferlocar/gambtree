<% requests = current_user.pending_requests%>
<% request_num = requests.count%>
<h2>Welcome to your Gambtree!</h2>
<p> You currently have <strong><%= request_num %> pending <%= request_num == 1 ? "leaf" : "leaves"%></strong> to 
  add to your Gambtree.</p><br />
  
<% if request_num > 0 %>
<p class="text-center">Add <strong><%= requests.first.user.full_name%></strong> as a new leaf of your Gambtree. To which branch do you wish to add your new leaf?</p>
<div class="row-fluid">
  <div class="span6" style="text-align: center">
    <%= link_to "Left branch", gambtree_add_leaf_to_branch_path(request_id: requests.first.id, to_left: "true"), method: :post, class: "btn btn-success btn-large" %>
  </div>
  <div class="span6" style="text-align: center">
  <%= link_to "Right branch", gambtree_add_leaf_to_branch_path(request_id: requests.first.id, to_left: "false"), method: :post, class: "btn btn-primary btn-large" %>
  </div>
</div>
<br /><br />

<% end %>

<h4 class="text-center">Check out your Gambtree!</h4><br />
<script>
  var leaves = [
      <%= @gambtree.map{|leaf| "{lvl:#{leaf[:lvl]},posn:#{leaf[:posn]}}"}.join(", ") %>
  ];
</script>
<%= javascript_include_tag '/assets/gambtree', 'data-turbolinks-track' => true %>
<div class="row-fluid">
  <div class="span12">
    <canvas id="gambtree">
    </canvas>
  </div>
</div>

